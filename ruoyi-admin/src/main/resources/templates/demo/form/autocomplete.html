<!DOCTYPE html>
<html lang="zh">
<head>
	<th:block th:include="include :: header('搜索自動補全')" />
</head>
<body class="gray-bg">
      <div class="wrapper wrapper-content animated fadeInRight">
        <div class="row">
            <div class="col-sm-6">
                <div class="ibox float-e-margins">
                    <div class="ibox-title">
                        <h5>搜索自動補全<small>https://github.com/lzwme/bootstrap-suggest-plugin</small></h5>
                    </div>  
                    <div class="ibox-content">
                        <p>展示下拉選單按鈕。</p>
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="input-group">
                                    <input type="text" class="form-control" id="suggest-demo-1">
                                    <div class="input-group-btn">
                                        <button type="button" class="btn btn-white dropdown-toggle" style="height: 31px" data-toggle="dropdown">
                                            <span class="caret"></span>
                                        </button>
                                        <ul class="dropdown-menu dropdown-menu-right" role="menu">
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <p>不展示下拉選單按鈕。</p>
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="input-group">
                                    <input type="text" class="form-control" id="suggest-demo-2">
                                    <div class="input-group-btn">
                                        <button type="button" class="btn btn-white dropdown-toggle" data-toggle="dropdown">
                                            <span class="caret"></span>
                                        </button>
                                        <ul class="dropdown-menu dropdown-menu-right" role="menu">
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <p>前端json中獲取數據</p>
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="input-group">
                                    <input type="text" class="form-control" id="suggest-demo-3">
                                    <div class="input-group-btn">
                                        <button type="button" class="btn btn-white dropdown-toggle" style="height: 31px" data-toggle="dropdown">
                                            <span class="caret"></span>
                                        </button>
                                        <ul class="dropdown-menu dropdown-menu-right" role="menu">
                                        </ul>
                                    </div>
                                    <!-- /btn-group -->
                                </div>
                            </div>
                        </div>
                        
                        <h3>百度搜索</h3>
                        <p>支持逗號分隔多關鍵字</p>
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="input-group" style="width: 300px;">
                                    <input type="text" class="form-control" id="baidu">
                                    <div class="input-group-btn">
                                        <button type="button" class="btn btn-white dropdown-toggle" style="height: 31px" data-toggle="dropdown">
                                            <span class="caret"></span>
                                        </button>
                                        <ul class="dropdown-menu dropdown-menu-right" role="menu">
                                        </ul>
                                    </div>
                                    <!-- /btn-group -->
                                </div>
                            </div>
                        </div>
                        
                        <h3>淘寶搜索</h3>
                        <p>支持逗號分隔多關鍵字</p>
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="input-group" style="width: 400px;">
                                    <input type="text" class="form-control" id="taobao">
                                    <div class="input-group-btn">
                                        <button type="button" class="btn btn-white dropdown-toggle" style="height: 31px" data-toggle="dropdown">
                                            <span class="caret"></span>
                                        </button>
                                        <ul class="dropdown-menu dropdown-menu-right" role="menu">
                                        </ul>
                                    </div>
                                    <!-- /btn-group -->
                                </div>
                            </div>
                        </div>
                        <hr>
                        <div class="form-group">
                            <label class="font-noraml">相關參數詳細資訊</label>
                            <div><a href="http://doc.ruoyi.vip/ruoyi/document/zjwd.html#bootstrap-suggest" target="_blank">http://doc.ruoyi.vip/ruoyi/document/zjwd.html#bootstrap-suggest</a></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-sm-6">
                <div class="ibox float-e-margins">
                    <div class="ibox-title">
                        <h5>搜索自動補全<small>https://github.com/bassjobsen/Bootstrap-3-Typeahead</small></h5>
                    </div>  
                    <div class="ibox-content">
                        <p>通過數據屬性的基本範例。</p>
                        <div class="row">
                            <div class="col-lg-6">
                           	    <input type="text" placeholder="ruoyi..." data-provide="typeahead" data-source='["ruoyi 1","ruoyi 2","ruoyi 3"]' class="form-control" />
                            </div>
                        </div>
                        <hr>
                        
                        <p>通過javascript的基本範例。</p>
                        <div class="row">
                            <div class="col-lg-6">
                                <input type="text" placeholder="ruoyi..." class="form-control" id="typeahead-demo-1"/>
                            </div>
                        </div>
                        
                        <hr>
                        <p>通過javascript的複雜範例。</p>
                        <div class="row">
                            <div class="col-lg-6">
                                <input type="text" placeholder="ruoyi..." class="form-control" id="typeahead-demo-2"/>
                            </div>
                        </div>
                        
                        <hr>
                        <p>後台url中獲取簡單數據</p>
                        <div class="row">
                            <div class="col-lg-6">
                                <input type="text" placeholder="ruoyi..." class="form-control" id="typeahead-demo-3"/>
                            </div>
                        </div>
                        
                        <hr>
                        <div class="form-group">
                            <label class="font-noraml">相關參數詳細資訊</label>
                            <div><a href="http://doc.ruoyi.vip/ruoyi/document/zjwd.html#bootstrap-typeahead" target="_blank">http://doc.ruoyi.vip/ruoyi/document/zjwd.html#bootstrap-typeahead</a></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <th:block th:include="include :: footer" />
    <th:block th:include="include :: bootstrap-suggest-js" />
    <th:block th:include="include :: bootstrap-typeahead-js" />
    <script type="text/javascript">
        
	    var testBsSuggest = $("#suggest-demo-1").bsSuggest({
	        url: ctx + "demo/form/userModel",
	        idField: "userId",
	        keyField: "userName"
	    }).on('onDataRequestSuccess', function (e, result) {
	        console.log('onDataRequestSuccess: ', result);
	    }).on('onSetSelectValue', function (e, keyword) {
	        console.log('onSetSelectValue: ', keyword);
	    }).on('onUnsetSelectValue', function (e) {
	        console.log("onUnsetSelectValue");
	    });
	    
	    var testBsSuggest = $("#suggest-demo-2").bsSuggest({
	        url: ctx + "demo/form/userModel",
	        showBtn: false,
	        idField: "userId",
	        keyField: "userName"
	    }).on('onDataRequestSuccess', function (e, result) {
	        console.log('onDataRequestSuccess: ', result);
	    }).on('onSetSelectValue', function (e, keyword) {
	        console.log('onSetSelectValue: ', keyword);
	    }).on('onUnsetSelectValue', function (e) {
	        console.log("onUnsetSelectValue");
	    });
	
	    //data 數據中獲取
	    var testdataBsSuggest = $("#suggest-demo-3").bsSuggest({
	        indexId: 1,
	        indexKey: 2,
	        data: {
	            'value': [
	                {
	                    'userId': '1',
	                    'userCode': '1000001',
	                    'userName': '測試1',
	                    'userPhone': '15888888888'
	                },
	                {
	                    'userId': '2',
	                    'userCode': '1000002',
	                    'userName': '測試2',
	                    'userPhone': '15888888888'
	                },
	                {
	                    'userId': '3',
	                    'userCode': '1000003',
	                    'userName': '測試3',
	                    'userPhone': '15888888888'
	                },
	                {
	                    'userId': '4',
	                    'userCode': '1000004',
	                    'userName': '測試4',
	                    'userPhone': '15888888888'
	                },
	                {
	                    'userId': '5',
	                    'userCode': '1000005',
	                    'userName': '測試5',
	                    'userPhone': '15888888888'
	                }
				],
	            'defaults': 'http://ruoyi.vip'
	        }
	    });
	    
	    //百度搜索測試
	    var baiduBsSuggest = $("#baidu").bsSuggest({
	        allowNoKeyword: false, //是否允許無關鍵字時請求數據
	        multiWord: true, //以分隔符號分割的多關鍵字支持
	        separator: ",", //多關鍵字支持時的分隔符號，預設為空格
	        getDataMethod: "url", //獲取數據的方式，總是從 URL 獲取
	        url: 'http://unionsug.baidu.com/su?p=3&t=' + (new Date()).getTime() + '&wd=',
	        /*優先從url ajax 請求 json 幫助數據，注意最後一個參數為關鍵字請求參數*/
	        jsonp: 'cb',
	        /*如果從 url 獲取數據，並且需要跨域，則該參數必須設置*/
	        processData: function (json) { // url 獲取數據時，對數據的處理，作為 getData 的回調函數
	            var i, len, data = {
	                value: []
	            };
	            if (!json || !json.s || json.s.length === 0) {
	                return false;
	            }
	
	            console.log(json);
	            len = json.s.length;
	
	            jsonStr = "{'value':[";
	            for (i = 0; i < len; i++) {
	                data.value.push({
	                    word: json.s[i]
	                });
	            }
	            data.defaults = 'baidu';
	
	            //字串轉化為 js 對象
	            return data;
	        }
	    });
	    
	    //淘寶搜索建議測試
	    var taobaoBsSuggest = $("#taobao").bsSuggest({
	        indexId: 2,                 // data.value 的第幾個數據，作為input輸入框的內容
	        indexKey: 1,                // data.value 的第幾個數據，作為input輸入框的內容
	        allowNoKeyword: false,      // 是否允許無關鍵字時請求數據
	        hideOnSelect: true,         // 滑鼠從列表單擊選擇了值時，是否隱藏選擇列表
	        multiWord: true,            // 以分隔符號分割的多關鍵字支持
	        separator: ",",             // 多關鍵字支持時的分隔符號，預設為空格
	        getDataMethod: "url",       // 獲取數據的方式，總是從 URL 獲取
	        effectiveFieldsAlias: {
	            Id: "序號",
	            Keyword: "關鍵字",
	            Count: "數量"
	        },
	        showHeader: true,
	        url: 'http://suggest.taobao.com/sug?code=utf-8&extras=1&q=',
	        /*優先從url ajax 請求 json 幫助數據，注意最後一個參數為關鍵字請求參數*/
	        jsonp: 'callback',
	        /*如果從 url 獲取數據，並且需要跨域，則該參數必須設置*/
	        processData: function (json) { // url 獲取數據時，對數據的處理，作為 getData 的回調函數
	            var i, len, data = {
	                value: []
	            };
	
	            if (!json || !json.result || json.result.length == 0) {
	                return false;
	            }
	
	            console.log(json);
	            len = json.result.length;
	
	            for (i = 0; i < len; i++) {
	                data.value.push({
	                    "Id": (i + 1),
	                    "Keyword": json.result[i][0],
	                    "Count": json.result[i][1]
	                });
	            }
	            console.log(data);
	            return data;
	        }
	    });
	    
	    $('#typeahead-demo-1').typeahead({
            source: ["ruoyi 1","ruoyi 2","ruoyi 3"]
        });
	    
	    $('#typeahead-demo-2').typeahead({
            source: [
                {"name": "Afghanistan", "code": "AF", "ccn0": "040"},
                {"name": "Land Islands", "code": "AX", "ccn0": "050"},
                {"name": "Albania", "code": "AL","ccn0": "060"},
                {"name": "Algeria", "code": "DZ","ccn0": "070"}
            ]
        });
	    
	    $.get(ctx + "demo/form/collection", function(data){
	    	$("#typeahead-demo-3").typeahead({
		        source: data.value
		    });
        },'json');
    </script>
</body>
</html>
